<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0053)http://marvin.cs.uidaho.edu/Teaching/CS445/pas04.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>CS445 - Assignment 4</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    
    <meta http-equiv="content-language" content="">
    <link href="./CS445 - Assignment 4_files/style.css" rel="stylesheet" type="text/css">
    <link rel="icon" type="image/gif" href="http://marvin.cs.uidaho.edu/Media/Pics/favicon.gif">
</head>

<body><div id="StayFocusd-infobar" style="display:none;">
    <img src="chrome-extension://laankejkbhbdhmipfmgcngdelahlfoji/common/img/eye_19x19_red.png">
    <span id="StayFocusd-infobar-msg"></span>
    <span id="StayFocusd-infobar-links">
        <a id="StayFocusd-infobar-never-show">hide forever</a>&nbsp;&nbsp;|&nbsp;&nbsp;
        <a id="StayFocusd-infobar-hide">hide once</a>
    </span>
</div>
    <div id="page">
        <div id="header">
            <h1><a href="http://marvin.cs.uidaho.edu/Teaching/CS445/pas04.html#">CS445 - Assignment 4</a></h1>
             <p id="subtitle">(Semantic Analysis Part 2)</p>
        </div>   					
        <div id="menu">
            <ul>
                <li><a href="http://marvin.cs.uidaho.edu/index.html">Home</a></li>
                <li><a href="http://marvin.cs.uidaho.edu/Teaching/index.html">Teaching</a></li>
                <li><a href="http://marvin.cs.uidaho.edu/Research/index.html">Research</a></li>
                <li><a href="http://marvin.cs.uidaho.edu/Advising/index.html">Advising</a></li>
                <li><a href="http://marvin.cs.uidaho.edu/Links/index.html">Links</a></li>
                <li><a href="http://marvin.cs.uidaho.edu/About/index.html">About</a></li>
            </ul>
        </div><!-- header -->    
        <div id="main">
            <div id="sidebar">
<p>
REWARD: 250 points    <img src="./CS445 - Assignment 4_files/status2.jpg">
</p><p>
DUE: Sun Nov 8 at 5PM PDT
</p><p>
TEST DATA: <a href="http://marvin.cs.uidaho.edu/Teaching/CS445/testDataA4.tar">testDataA4.tar</a>,
<a href="http://marvin.cs.uidaho.edu/Teaching/CS445/testDataA4.zip">testDataA4.zip</a>
</p><hr>

            </div><!-- sidebar -->               
            <div id="content">

<h3>The Problem</h3>
<p>

In this assignment we will continue our semantic analysis and semantic
error generation of the abstract syntax tree. We will also add in the
I/O library.

</p><h3>Tiny Grammar Change</h3>

You may <b>optionally</b> change your grammar to only allow
<pre>mutable :  ID '[' exp ']'
</pre>
Instead of:
<pre>mutable :  mutable '[' exp ']'
</pre>

The latter was left from a previous version of the language. This
eliminates the need to the second version of this error message:
"ERROR(%d): Cannot index nonarray.\n" which does not have a %s in it.
I will no longer be testing for that error (see error list next).

<h3>Semantic Errors</h3>
<p> 

We will generate more errors that are tagged with useful line numbers
and we will go back and improve a couple of error messages for
readability.  You will be graded on the error messages from assignment 3 and
4 together.   So be sure you have assignment 3 messages working.
The list of all errors to be generate both last
assignment and this are found in this <a href="http://marvin.cs.uidaho.edu/Teaching/CS445/errorMsgs04.txt">organized list</a>. A careful sdiff between the
<a href="http://marvin.cs.uidaho.edu/Teaching/CS445/errorMsgs03.txt">error list from last time</a> and this time
can be found in this <a href="http://marvin.cs.uidaho.edu/Teaching/CS445/errorMsgsDiff.txt">all errors diff
file</a>. Note that some of the diffs are lines that are altered just
a bit. The kinds of changes we have are:

</p><p>
</p><ol>
<li> added single quotes to two warnings.
</li><li> removed the near duplicate error message: "ERROR(%d): Cannot index nonarray.\n"
</li></ol>
<p>
Your job in writing the treeTraverse routine is to catch a variety of
warnings and errors and duplicate my output for any input given.
</p><p>
You should keep count of the number of warnings and errors
and report that at the end of a run.
</p><p>
Here are some details:
</p><p>
</p><ul>
<p>

</p><li> For IO routines output, outputb, outputc, input, inputb, inputc,
outnl, you will need to hand construct <b>prototype equivalents</b>
into the abstract syntax tree. They have the C- prototypes:

<pre>void output(int)
void outputb(bool)
void outputc(char)
int input()
bool inputb()
char inputc()
void outnl()
</pre>

The line numbers for the I/O routines are -1.   The name for any
parameter variables is "*dummy*".   Feed this I/O library tree to your semantic
analysis tree traverser to load the symbols into the symbol table.
Then feed the AST from the parser into your semantic
analysis tree traverser with that symbol table
and it will find the prototypes you supplied.  Roughly:
<ol>
<li>build I/O prototype tree by hand
</li><li>scan the I/O tree with your semantic analysis routine to enter symbols in symbol table
</li><li>scan the AST with your semantic analysis routine and the symbol table.
</li></ol>
Here is a dump of the I/O tree you build by hand:
<br>
<img src="./CS445 - Assignment 4_files/iolibtreeSm.png">

<p>
</p></li><li> <b>While</b> and <b>If</b> should check they have Boolean tests.

<p>
</p></li><li> <b>For</b> should be sure that the ID after "in" is an array. AND
that you copy the type of the array to the type of the ID of the
variable before the "in".

<p>
</p></li><li> <b>Assignments</b> and <b>operators</b> should check that they
have the proper type.  Types of expressions will have to be passed up.
Beware of <b>Cascading Errors</b> as discussed in class.
Hint: it might be useful to have an undefined class that
is used to when variables are undefined or the type is undefined.

<p>
</p></li><li> For <b>return</b> check for return type matches.  Note that it is
easy to check that the return is of the same type as function.  It is hard to
check that a return is made out of every exit so we will not issue a
error for that.  However, <b>I have added a warning</b> for a much simplified
check.  Note that routines that do not return a value use the return without an
argument.  A routine whose code falls out the bottom will perform a
return of the right type by default.  (More on the value returned in
the next assignment.)

<p>
</p></li><li> For <b>break</b> check that the break is inside a loop. 

<p>
</p></li><li> For <b>Ids</b> you have to see if the variable has been defined
or not and set the type of the Id node to the type of the declaration.
If the Id is undefined then set the type of the id in the expression to
<b>UndefinedType</b> (or some other indicator that the type
information is missing).  This is a type that when it does not match
the required type of parent nodes it does <b>not</b> generate an error!!!
Again to prevent cascading errors.
Note: You may have to guard against UndefinedType in many places.
Encapsulate redundant code as functions.
There is not a lot of duplicate code in this assignment.

<p>
</p></li><li> Errors for initialization include an error if the initialization
value is not constant.  This means tracking what parts of an
expression are constant.   Note at parse time you could use the
attribute grammar aspect of Bison to compute the value of a constant
expression and substitute that for the subtree!  But that is NOT
for us now.

<p>
</p></li><li> For Ids, you can have <b>arrays</b> that are indexed.  Once they are
indexed, their type becomes nonarray.  Check for indexing
of nonarrays and using unindexed arrays where they can't be used.

<p>
</p></li><li> Ids that are arrays can also be prefixed with '*' operator.
That lets you get at the size of the array.  Every array stores
not only the values in the array but its size.  This means that
an array of size 10 (e.g. frog[10]) secretly needs 11 spaces allocated to
it.  More about this in the code generation assignment.

<p>
</p></li><li> The <b>function call</b>
is the trickiest of all. You must use the symbol table lookup to find
the definition node and from there compare the types in the parameter
list with the types of the arguments given. This means you must
compare the type of the supplied argument to the type of the formal
parameters for a type match. Also if you run out of formal parameters
before you run out of actual arguments you need to issue an error.
Same for running out actual arguments. See the error messages for an
appropriate error.

<p>
</p></li><li>  Finally, if the function main is not defined then
you must print out the error:
<pre>ERROR(LINKER): Procedure main is not defined.
</pre>
</li></ul>

<h3>Submission</h3>
<p>
Homework will be submitted as an <b>uncompressed</b> tar file to the
submit page which can be found in the services section of the class
page.  You can submit as many times as you like.  <b>The LAST file you
submit BEFORE the deadline will be the one graded.</b> Absolutely, no
late papers.  For all submissions you will receive email at your
uidaho address showing how your file performed on the pre-grade tests.
The grading program will use more extensive tests, so thoroughly test
your program with inputs of your own.
</p><p>

If you have tests you really think are important or just cool please
send them to me and I will consider adding them to the test suite.
            </p></div><!-- content -->
            <div class="clearing">&nbsp;</div> 
        </div><!-- main -->
    </div><!-- page -->
    <div id="footer">
        <p>Copyright Â© 2012, original design by <a href="http://www.alphastudio.pl/" target="_blank">Alpha Studio</a> transfigured by R. Heckendorn
</p>
    </div>


<div class="betternet-wrapper"></div></body></html>
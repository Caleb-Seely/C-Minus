<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0053)http://marvin.cs.uidaho.edu/Teaching/CS445/pas01.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>CS445 - Assignment 1</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    
    <meta http-equiv="content-language" content="">
    <link href="./CS445 - Assignment 1_files/style.css" rel="stylesheet" type="text/css">
    <link rel="icon" type="image/gif" href="http://marvin.cs.uidaho.edu/Media/Pics/favicon.gif">
</head>

<body><div id="StayFocusd-infobar" style="display:none;">
    <img src="chrome-extension://laankejkbhbdhmipfmgcngdelahlfoji/common/img/eye_19x19_red.png">
    <span id="StayFocusd-infobar-msg"></span>
    <span id="StayFocusd-infobar-links">
        <a id="StayFocusd-infobar-never-show">hide forever</a>&nbsp;&nbsp;|&nbsp;&nbsp;
        <a id="StayFocusd-infobar-hide">hide once</a>
    </span>
</div>
    <div id="page">
        <div id="header">
            <h1><a href="http://marvin.cs.uidaho.edu/Teaching/CS445/pas01.html#">CS445 - Assignment 1</a></h1>
             <p id="subtitle">(The Scanner)</p>
        </div>   					
        <div id="menu">
            <ul>
                <li><a href="http://marvin.cs.uidaho.edu/index.html">Home</a></li>
                <li><a href="http://marvin.cs.uidaho.edu/Teaching/index.html">Teaching</a></li>
                <li><a href="http://marvin.cs.uidaho.edu/Research/index.html">Research</a></li>
                <li><a href="http://marvin.cs.uidaho.edu/Advising/index.html">Advising</a></li>
                <li><a href="http://marvin.cs.uidaho.edu/Links/index.html">Links</a></li>
                <li><a href="http://marvin.cs.uidaho.edu/About/index.html">About</a></li>
            </ul>
        </div><!-- header -->    
        <div id="main">
            <div id="sidebar">
<p>
REWARD: 160 points <img src="./CS445 - Assignment 1_files/status4.jpg">
</p><p>
DUE: Tue Sep 15 at 5PM PDT
</p><p>
TEST DATA: <a href="http://marvin.cs.uidaho.edu/Teaching/CS445/testDataA1.tar">testDataA1.tar</a>
</p><hr>

            </div><!-- sidebar -->               
            <div id="content">
<p>
Because the output of your program will first be preprocessed by an
automatic comparison program before being examined by a human being.
<b>Please follow formatting instructions/examples very carefully</b>.  The results
your program produces will need to <b>look exactly like the target</b>.
Do not embellish with extra titles or other text such as "run
complete" or "CS445 output".  I will take off points for this.
(This is realistic.  Most companies run test suites on their products and breaking the test suites
is not looked upon well.)
The testing facility of the submit
script will help you get this annoying detail right.  
Thanks for your patience. 

</p><h2>The Problem</h2>
<p>

Use a combination of Flex and Bison code as instructed in class to
build and test a scanner for the <a href="http://marvin.cs.uidaho.edu/Teaching/CS445/c-Grammar.pdf">C- language</a>
defined on Aug 28 or later. The scanner will be named <b>c-</b> <b>(</b>note
the lowercase. That is, <b>c-</b> will ultimately be the compiler for
the language <b>C-</b>.<b>)</b>. It will read and process a stream of
characters representing tokens from a file. The filename may given as
the first argument to the <b>c-</b> command OR the input can come from
standard input if the filename argument is not present. This means the
call to <b>c-</b> on the C- code in file <tt>filename</tt>may be given
as:

</p><pre>c- {filename}
</pre>
<p>
or
</p><p>
</p><pre> 
cat filename | c- 
</pre>
<p>
or
</p><p>
</p><pre>c- &lt; filename
</pre>
To get this to work requires that you be able to optionally read a
file off the command line. Do this in the main function.  You will need to
define arguments to main (as you remember from early classes):
<pre>int main(int argc, char *argv[])
</pre>
and use the variable <tt>yyin</tt>.
In order to access the variable <tt>yyin</tt>,
it needs to be declared extern in the bison code where
main is:
<pre>extern FILE *yyin;
</pre>
Using <tt>fopen()</tt> you can
get a <tt>FILE *</tt> for the commandline file.
This is the same type as the familiar <tt>stdin</tt> and <tt>stdout</tt>.
<p>
It will produce a stream of tokens 
and its output is as described below.  (Pretesting your answer will help
assure compliance.)  It will be constructed using both flex and Bison to
run on the department linux machines.  The machine cs-445.cs.uidaho.edu
is available for class use using your UI credentials.
IMPORTANT: That is where the grading will occur and it must compile and run there!

</p><h2>The Flex Part</h2>
<p>
Build a Flex scanner that returns a token class for each token in the
C- grammar.  For numbers it should also "return" a numerical value and
the string the user typed.  For ids it should also return a string.
It should treat the Booleans "true" and "false" as keywords but
internally treat them as a BOOLCONST with values 0 and 1 for false and
true respectively.  The scanner should ignore comments and whitespace and not
return.
</p><p>
Your compiler will generate an error if there is an illegal character in the
input.  That occurs when none of the token patterns match the top of input.
See the example output for the exact wording of the error message.
No token will be returned in the case of this error and scanning will continue.
</p><p>
Your compiler will generate an warning if a character constant is given with
more than one character.  e.g.  'dogs'.   If this happens the first character will
be used, the remaining ignored, and a warning issued.
</p><p>
Your compiler will generate an error if a character constant is given with
no characters in it, i.e.  ''.   No token will be returned and the token ignored.
</p><p>
HINT: The scanner should keep track of the line number of each 
token and return it with the token and a string and
and/or numeric representation of the token, if appropriate,
in a struct or class instance.
This can be done by using yylval to contain a pointer to a struct
or class instance you create.
</p><p>
CODING RESTRICTIONS:
<b>DO NOT USE YYSTYPE!!!!!!  I will take off points.  Really.
</b> This is bad programming practice and
is done in some of the code in the book.    flex/Bison provides
%union to make this association possible and that provides type checking
so we should use that.  
</p><p> 
Note that in C-, like C and C++, newline is <b>not</b> an element of the
grammar and is merely whitespace.  This was not true for the
calculator program we reviewed in class.
 
</p><h2>The Bison Part</h2>
<p>
Build a Bison parser as instructed in class that accepts any stream of
legal tokens from the scanner.   You will have to come up with the
simple grammar for this.   This is a
grammar for just a stream of any legal tokens.  <b>It is NOT the grammar for
C-!</b>  The Bison part prints out the line number, the token
type, and any extra information returned by the scanner.
See example output to see what it should look like.
Again, this first program
<b>will not</b> recognize C-.  It will only recognize C- tokens. 
One of the goals of this assignment is to get the basic build and communication
between flex and Bison up and running.
</p><p>
</p><h2>Test data</h2>
<p>
Use the test data provided above to 
decide the format for test output.
</p><p>
Note that IDs are not what you think they 
are.  They are not exactly like in C++.
</p><p>
Character constants may be the null character and so print in a way that can't be
seen if you use a %c format.   That is OK.  I will be checking for an actual
null character to be output with the %c.  Use %c for
chars for this assignment.
</p><p>
Note the class of any single special character token
is <b>printed</b> as
the characters itself.   The class of any
multicharacter token is printed as an
all uppercase string.
</p><p>
Further test data will be available as soon as the submit script
is available.

</p><h2>Build and Test</h2>

<p>
You will have at least:

</p><ul>
<li> a file parser.l that contains the flex code
</li><li> a file parser.y that contains the bison code
</li><li> a file scanType.h that contains the declaration of either a
struct or class that is used to pass your token information back from
the scanner.  This file will be included in the right place BOTH the
.l and .y files.
</li><li> a makefile (note the all lowercase) that I will execute
to build your <b>c-</b>.
</li></ul>

Here is an example of what the scantype.h file might look like:
<p>
</p><pre>#ifndef _SCANTYPE_H_
#define _SCANTYPE_H_
// 
//  SCANNER TOKENDATA
// 
struct TokenData {
    int  tokenclass;        // token class
    int  linenum;           // line where found
    char *tokenstr;         // what string was actually read
    char cvalue;            // any character value
    int  nvalue;            // any numeric value or Boolean value
    char *svalue;           // any string value e.g. an id
};
#endif
</pre>

<p> I will then run several files containing tokens through your
<b>c-</b> and compare the results.  I will do multiple runs, running
them by both piping data into the file AND by using the filename as an
argument.  Make sure your code can handle both cases.

</p><h2>Submission</h2>

<p> Homework will be submitted as an <b>uncompressed</b> tar file
that contains no subdirectories.
The tar file is submitted to the class submission page.
You can submit as many times as you like.
<b>The LAST file you submit BEFORE the deadline will be the one
graded.</b> Absolutely, no late papers.  For all submissions you will
receive email at your uidaho address showing how your file performed
on the pre-grade tests.  The grading program will use more extensive
tests, so thoroughly test your program with inputs of your own.

Your code should compile and run with runtime errors such as seg faults.
If it doesn't it is considered nearly ungradable.

</p><p>
If you have tests you really think are important or just cool please
send them to me and I will consider adding them to the test suite.

            </p></div><!-- content -->
            <div class="clearing">&nbsp;</div> 
        </div><!-- main -->
    </div><!-- page -->
    <div id="footer">
        <p>Copyright © 2012, original design by <a href="http://www.alphastudio.pl/" target="_blank">Alpha Studio</a> transfigured by R. Heckendorn
</p>
    </div>


<div class="betternet-wrapper"></div></body></html>